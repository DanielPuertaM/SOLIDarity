<div class="relative">

    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-primary to-primary/80"></div>

        <svg class="absolute top-0 left-0 w-full h-51 text-white/20" viewBox="0 0 1440 320" preserveAspectRatio="none">
            <path fill="currentColor"
                d="M0,96L80,112C160,128,320,160,480,160C640,160,800,128,960,112C1120,96,1280,96,1360,96L1440,96L1440,0H0Z">
            </path>
        </svg>

        <svg class="absolute bottom-0 right-0 w-full h-51 text-white/20 rotate-180" viewBox="0 0 1440 320"
            preserveAspectRatio="none">
            <path fill="currentColor"
                d="M0,96L80,112C160,128,320,160,480,160C640,160,800,128,960,112C1120,96,1280,96,1360,96L1440,96L1440,0H0Z">
            </path>
        </svg>

        <svg class="absolute top-24 right-10 w-16 h-16 opacity-15 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 21s-6-4.35-9-8.5S2.75 3 6 3c2.5 0 4 2 4 2s1.5-2 4-2c3.25 0 6 3.5 3 9.5S12 21 12 21z" />
        </svg>

        <svg class="absolute bottom-20 left-12 w-20 h-20 opacity-15 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 21s-6-4.35-9-8.5S2.75 3 6 3c2.5 0 4 2 4 2s1.5-2 4-2c3.25 0 6 3.5 3 9.5S12 21 12 21z" />
        </svg>
    </div>

    <div class="relative z-10 py-15 max-w-4xl mx-auto">



        @if (userResource.isLoading()) {
        <div class="text-center text-gray-500 dark:text-gray-400 py-12 animate-pulse">
            {{ globalService.WORDS.LABEL.LOADING_PROFILE }}
        </div>
        }
        @else if (userResource.value()) {

        @let user = userResource.value();

        @if (user) {

        <div class="bg-white dark:bg-base-200 border border-gray-200 dark:border-base-300
                   rounded-3xl shadow-xl overflow-hidden transition-all duration-500">

            <div class="relative h-64 sm:h-80 flex items-center justify-center 
                        bg-gray-100 dark:bg-gray-800 overflow-hidden">

                <span class="absolute text-6xl sm:text-7xl font-bold text-gray-600 dark:text-gray-300
                           transition-opacity duration-300 select-none" [class.opacity-0]="imagenLoaded">
                    {{ user.name.charAt(0).toUpperCase() }}
                </span>

                <img [src]="previewImage || user?.imagenUrl" alt="{{ user?.name }}"
                    class="w-full h-full object-cover transition-opacity duration-500" [class.opacity-0]="!imagenLoaded"
                    (load)="imagenLoaded = true" (error)="imagenLoaded = false; user!.imagenUrl = ''" />
            </div>

            <div class="p-4 bg-gray-50 dark:bg-base-300 border-t border-gray-200 dark:border-base-400">
                <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">

                    <input type="file" accept="image/*" (change)="onImageSelected($event)" class="w-150 file:mr-3 file:py-2 file:px-4 
                               file:rounded-lg file:border file:border-primary 
                               file:bg-primary file:text-white file:hover:bg-primary/80
                               file:cursor-pointer text-sm" />

                    @if (selectedImage) {
                    <button (click)="uploadSelectedImage(user.id)" class="btn btn-primary btn-sm">
                        Subir imagen
                    </button>
                    }
                </div>
            </div>

            <div class="p-8 sm:p-10 space-y-8">

    <!-- NOMBRE DEL USUARIO -->
    <div>
        <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">
            {{ user.name }}
        </h1>
        <p class="text-gray-500 dark:text-gray-400 mt-1">
            Información del perfil
        </p>
    </div>

    <!-- INFORMACIÓN DEL USUARIO -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">

        <!-- EMAIL -->
        <div class="p-4 rounded-xl bg-gray-50 dark:bg-base-300 border border-gray-200 dark:border-base-400">
            <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">
                Email
            </p>
            <p class="mt-1 text-gray-900 dark:text-gray-100 font-medium">
                {{ user.email }}
            </p>
        </div>

        <!-- TELÉFONO -->
        <div class="p-4 rounded-xl bg-gray-50 dark:bg-base-300 border border-gray-200 dark:border-base-400">
            <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">
                Teléfono
            </p>
            <p class="mt-1 text-gray-900 dark:text-gray-100 font-medium">
                {{ user.telefono }}
            </p>
        </div>

        <!-- DIRECCIÓN -->
        <div class="sm:col-span-2 p-4 rounded-xl bg-gray-50 dark:bg-base-300 border border-gray-200 dark:border-base-400">
            <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">
                Dirección
            </p>
            <p class="mt-1 text-gray-900 dark:text-gray-100 font-medium">
                {{ user.address }}
            </p>
        </div>

    </div>

</div>

        </div>

        }
        }
        @else {
        <div class="text-center text-red-600 dark:text-red-400 py-12">
            No se encontró la información del usuario.
        </div>
        }

    </div>
</div>